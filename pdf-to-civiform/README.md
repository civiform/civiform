# PDF to CiviForm

This is a prototype transforming an input PDF containing government forms to civiform json.  
Relevant documentation and active work items are captured in this epic: [https://github.com/civiform/civiform/issues/9967](https://github.com/civiform/civiform/issues/9967)

## How to run

To run the prototype:

- Make sure you have your Gemini API key in `~/google_api_key`
- This script requires python 3.x and the set of dependencies. Use "pip install" when prompted.
- From `/workspaces/civiform/pdf-to-civiform`, run the following script from the command line:

  ```bash
  python pdf_to_civiform.py
  ```

- Launch `http://localhost:5000/` in your browser and upload a PDF file.

There are 3 output files generated in `~/pdf-to-civiform/`. The "PREFIX" in the output filenames refers to the original PDF filename (without the '.pdf' extension).

- `<PREFIX-formated-<LLM model-used>.json` - intermediary JSON generated by LLM from the input PDF containing structural form information.
- `PREFIX-post-processed-<LLM model-used>.json` - post-processed JSON generated by LLM to adjust extracted field types.
- `PREFIX-civiform-<LLM model-used>.json` - containing JSON to be imported into CiviForm.

Import the generated CiviForm JSON (in `PREFIX-civiform.json`) into CiviForm using the "[Import program" flow](https://docs.civiform.us/user-manual/civiform-admin-guide/program-migration#importing-a-program)

- log in as a civiform admin, the "Import existing program" link should appear on the programs page.
- From there, you paste in the CiviForm JSON and go through the flow

You can also run pdf-to-civiform-gemini.py or convert_to_civiform_json.py from command line to convert PDF form to intermediary json and from intermediary json to CiviForm json respectively, without going through the web page.