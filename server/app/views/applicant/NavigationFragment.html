<th:block th:fragment="pageHeader">
  <div th:replace="~{this :: officialGovermentWebsiteBanner}"></div>
  <div class="usa-overlay"></div>
  <header class="usa-header usa-header--basic" role="banner">
    <div class="usa-nav-container">
      <div class="usa-navbar">
        <a
          href="/"
          class="usa-logo display-flex flex-align-center"
          id="header-return-home"
        >
          <img
            th:src="${smallLogoUrl}"
            class="width-8 padding-right-2"
            th:attr="alt=${civicEntityFullName + ' Logo'}"
          />
          <em class="usa-logo__text">
            <span th:text="${civicEntityShortName}"></span>
            <span>CiviForm</span>
          </em>
        </a>
        <button
          type="button"
          class="usa-menu-btn"
          th:text="#{header.menu}"
        ></button>
      </div>
      <nav aria-label="Primary navigation" class="usa-nav" role="navigation">
        <button type="button" class="usa-nav__close">
          <svg
            th:replace="~{applicant/ApplicantBaseFragment :: icon(${closeIcon})}"
          ></svg>
        </button>
        <th:block th:if="${showDebugTools}">
          <button th:replace="~{this :: showDebugTools}"></button>
        </th:block>
        <button th:replace="~{this :: loginOrLogout}"></button>
        <button th:replace="~{this :: languageSelector}"></button>
      </nav>
    </div>
  </header>
</th:block>

<section
  th:fragment="officialGovermentWebsiteBanner"
  class="usa-banner"
  aria-label="Official website of the United States government"
  data-testId="governmentBanner"
>
  <div class="usa-accordion">
    <header class="usa-banner__header">
      <div class="usa-banner__inner">
        <div class="grid-col-fill tablet:grid-col-auto" aria-hidden="true">
          <p
            class="usa-banner__header-text"
            th:text="#{banner.northStarTitle}"
          ></p>
          <p class="usa-banner__header-action" th:text="#{banner.link}"></p>
        </div>
        <button
          type="button"
          class="usa-accordion__button usa-banner__button"
          aria-expanded="false"
          aria-controls="gov-banner-default"
        >
          <span class="usa-banner__button-text" th:text="#{banner.link}"></span>
        </button>
      </div>
    </header>
    <div
      class="usa-banner__content usa-accordion__content"
      id="gov-banner-default"
    >
      <div class="grid-row grid-gap-lg">
        <div class="usa-banner__guidance tablet:grid-col-6">
          <img
            class="usa-banner__icon usa-media-block__img"
            th:src="${govIcon}"
            role="img"
            alt=""
            aria-hidden="true"
          />
          <div class="usa-media-block__body">
            <p>
              <strong th:text="#{banner.govWebsiteSectionHeader}"></strong
              ><br />
              <span th:text="#{banner.govWebsiteSectionContent}"></span>
            </p>
          </div>
        </div>
        <div class="usa-banner__guidance tablet:grid-col-6">
          <img
            class="usa-banner__icon usa-media-block__img"
            th:src="${httpsIcon}"
            role="img"
            alt=""
            aria-hidden="true"
          />
          <div class="usa-media-block__body">
            <p>
              <strong th:text="#{banner.httpsSectionHeader}"></strong><br />
              <th:block
                th:utext="#{banner.httpsSectionContent(~{this :: lockIcon})}"
              ></th:block>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!--/* We should be able to use ApplicantBaseFragment :: icon to render the icon, but this icon
       is being rendered within a message, which means it can't include any thymeleaf processing,
       so we have to directly invoke the html of the icon. */-->
<span th:fragment="lockIcon" class="icon-lock"
  ><svg
    th:fragment="lockIcon"
    xmlns="http://www.w3.org/2000/svg"
    width="52"
    height="64"
    viewBox="0 0 52 64"
    class="usa-banner__lock-image display-inline text-baseline"
    role="img"
    aria-labelledby="banner-lock-description-default"
    focusable="false"
  >
    <title id="banner-lock-title-default">Lock</title>
    <desc id="banner-lock-description-default">Locked padlock icon</desc>
    <path
      fill="#000000"
      fill-rule="evenodd"
      d="M26 0c10.493 0 19 8.507 19 19v9h3a4 4 0 0 1 4 4v28a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V32a4 4 0 0 1 4-4h3v-9C7 8.507 15.507 0 26 0zm0 8c-5.979 0-10.843 4.77-10.996 10.712L15 19v9h22v-9c0-6.075-4.925-11-11-11z"
    />
  </svg>
</span>

<a
  th:fragment="showDebugTools"
  type="button"
  class="usa-button usa-button--outline"
  id="debug-content-modal-button"
  href="#debug-content-modal"
  data-open-modal
  aria-controls="debug-content-modal"
  >DevTools</a
>

<th:block th:fragment="loginOrLogout">
  <th:block th:if="${isGuest}">
    <span th:text="#{header.guestIndicator}" class="padding-right-1"></span>
    <a
      type="button"
      class="usa-button usa-button--outline"
      th:text="#{header.endSession}"
      id="logout-button"
      th:href="${logoutLink}"
    ></a>
    <a
      type="button"
      class="usa-button usa-button--outline"
      th:text="#{button.login}"
      id="login-button"
      th:href="${loginLink}"
    ></a>
  </th:block>

  <th:block th:if="${!isGuest}">
    <span
      th:text="#{header.userName(${loggedInAs})}"
      class="padding-right-1"
    ></span>
    <a
      type="button"
      class="usa-button usa-button--outline"
      th:text="#{button.logout}"
      id="logout-button"
      th:href="${logoutLink}"
    ></a>
  </th:block>
</th:block>

<div th:fragment="languageSelector">
  <form th:action="${updateLanguageAction}" method="POST">
    <input hidden th:value="${csrfToken}" name="csrfToken" />
    <input hidden th:value="${requestUri}" name="redirectLink" />

    <select
      name="locale"
      onchange="this.form.submit()"
      th:aria-label="#{label.languageSr}"
      class="usa-button"
      id="select-language"
    >
      <option hidden selected="true">Languages</option>
      <option
        class="usa-language__submenu-item"
        th:each="language: ${enabledLanguages}"
        th:value="${language.key.code()}"
        th:text="${language.value}"
      ></option>
    </select>
  </form>
</div>
