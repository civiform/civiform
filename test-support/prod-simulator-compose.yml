services:
  db:
    image: postgres:16.9@sha256:ddfe3e8713e3ee5b8f286082cb12512488dfbf3f5a1ecb0b74a42e6055af0a5f
    restart: always
    ports:
      - 5432:5432
    environment:
      POSTGRES_PASSWORD: example

  civiform:
    platform: linux/amd64
    image: civiform:prod
    restart: always
    container_name: civiform_prod
    links:
      - 'db:database'
    ports:
      - 8888:9000
    environment:
      # Randomly generated value to comply with Play's secret length
      - SECRET_KEY=K5SgucxBYC3xJwNcGWZV1Y7uASmrc+SqftbcTROH0s8=
      - APPLICANT_OIDC_CLIENT_ID=client
      - APPLICANT_OIDC_CLIENT_SECRET=notarealsecret
      - APPLICANT_OIDC_DISCOVERY_URI=https://civiform-staging.us.auth0.com/.well-known/openid-configuration
      - CIVIFORM_APPLICANT_IDP=auth0
