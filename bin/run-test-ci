#! /usr/bin/env bash

# DOC: Run the unit tests in CI mode.

source bin/lib.sh

docker::ensure_unit_test_env

docker run --rm \
  --network test-support_default \
  -v "$(pwd)/universal-application-tool-0.0.1:/usr/src/universal-application-tool-0.0.1" \
  -v "civiform_target:/usr/src/universal-application-tool-0.0.1/target" \
  -v "civiform_coursier-data:/root/.cache/coursier" \
  -v "civiform_sbt-data:/root/.sbt" \
  -v "civiform_ivy2-data:/root/.ivy2" \
  civiform-dev \
  test
