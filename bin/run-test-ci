#! /usr/bin/env bash

# DOC: Run the unit tests in CI mode.

export COMPOSE_PROJECT_NAME=test-support
export COMPOSE_INTERACTIVE_NO_CLI=1

source bin/lib.sh

docker::ensure_unit_test_env

docker compose -f docker-compose.yml \
  up civiform \
  -d

docker exec civiform sbt test
docker compose -f docker-compose.yml \
  down civiform \
  -d
