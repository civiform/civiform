#! /usr/bin/env bash

# DOC: Run the unit tests in CI mode.

export COMPOSE_PROJECT_NAME=test-support
source bin/lib.sh

docker::ensure_unit_test_env

readonly COMPOSE_CMD="docker compose \
  -f docker-compose.yml"

${COMPOSE_CMD} up civiform -d
${COMPOSE_CMD} exec civiform sbt test
${COMPOSE_CMD} down

docker::remove_unit_test_env
