#! /usr/bin/env bash

# DOC: Run the unit tests in CI mode.

export COMPOSE_PROJECT_NAME=test-support
source bin/lib.sh

docker compose \
  -f test-support/unit-test-docker-compose.yml \
  -f test-support/unit-test-docker-compose.ci.yml \
  up -d

docker compose \
  -f test-support/unit-test-docker-compose.yml \
  -f test-support/unit-test-docker-compose.ci.yml \
  exec civiform sbt test

docker compose \
  -f test-support/unit-test-docker-compose.yml \
  -f test-support/unit-test-docker-compose.ci.yml \
  down
