#! /usr/bin/env bash

# DOC: Run the Java test suite in Docker.

export COMPOSE_PROJECT_NAME=test-support
source bin/lib.sh

bin/pull-image
docker compose \
  -f test-support/unit-test-docker-compose.yml \
  up -d

docker compose \
  -f test-support/unit-test-docker-compose.yml \
  exec civiform "sbt test"

docker compose \
  -f test-support/unit-test-docker-compose.yml \
  down
