#! /usr/bin/env bash

# DOC: Run the Java test suite in Docker.

export COMPOSE_PROJECT_NAME="$(basename $(pwd))-test-support"
source bin/lib.sh

bin/pull-image

readonly COMPOSE_CMD="docker compose \
  -f test-support/unit-test-docker-compose.yml"

${COMPOSE_CMD} up civiform -d
${COMPOSE_CMD} exec civiform sbt test
${COMPOSE_CMD} down
