#! /usr/bin/env bash

# DOC: Checks that python 3.10+ is install and a venv directory exists in env-var-docs.

source bin/lib.sh

if [[ "$(which python3)" == "" ]]; then
  echo "System installation of python 3.10+ is required"
  exit 1
fi

python3 - <<EOF
import sys
v = sys.version_info
if v.major >= 3 and v.minor >= 10:
    pass
else:
    exit("System installation of python >= 3.10 is required")
EOF

if [[ ! -d env-var-docs/venv ]]; then
  echo "venv does not exist in env-var-docs, creating..."
  python3 -m venv env-var-docs/venv
fi

echo "To activate the virtual environment, run 'source env-var-docs/venv/bin/activate'. To deactivate the environment, run 'deactivate'"
