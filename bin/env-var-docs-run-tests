#! /usr/bin/env bash

# DOC: Runs mypy and pytest on env-var-docs directory.

docker run --rm \
  -v "$(pwd):/code" \
  python:3.11.4-slim \
  sh -c 'cd code && \
  pip install PyGithub && \
  pip install -e env-var-docs/parser-package[test] && \
  echo "Running mypy..." && \
  mypy env-var-docs --exclude build && \
  echo "Running pytest..." && \
  pytest --cov=env-var-docs --cov-report=term --cov-report=html --cov-report=xml && \
  echo "To see coverage report, open htmlcov/index.html in a web browser."'
