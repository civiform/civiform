#! /bin/bash

# DOC: Run the browser tests in CI mode.

pushd $(git rev-parse --show-toplevel)

set -e
set +x

sleep 5

docker ps --format "{{.Names}}: {{.Networks}}"

docker run \
  -v "$(pwd)/browser-test/src:/usr/src/civiform-browser-tests/src" \
  -v "$(pwd)/browser-test/bin:/usr/src/civiform-browser-tests/bin" \
  civiform-browser-test:latest \
  /usr/src/civiform-browser-tests/bin/wait_for_server_start_and_run_tests.sh \
  $@

popd
